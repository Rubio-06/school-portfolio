---
import Social from "@shared/Social.astro";
import { navigation } from "@config/navigation";

const currentPath = Astro.url.pathname;
---

<header class="fixed top-0 z-50 w-full border-b border-white/10 bg-slate-900/80 backdrop-blur-lg">
  <nav class="container mx-auto flex items-center justify-between px-8 py-4">
    <div class="group">
      <a
        href="/"
        class="bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-2xl font-bold text-white"
      >
        Rubio Abela
      </a>
    </div>

    <div class="flex items-center gap-12">
      <ul class="flex items-center gap-8">
        {
          navigation.map((group, groupIndex) => (
            <>
              <div class="flex items-center gap-6">
                {group.items.map((item) => {
                  const isActive =
                    currentPath === item.href ||
                    (item.href !== "/" && currentPath.startsWith(item.href));
                  return (
                    <li class="relative">
                      <a
                        href={item.href}
                        data-nav-link
                        class:list={[
                          "relative block px-3 py-2 text-sm font-medium",
                          isActive ? "active text-white" : "text-gray-400",
                        ]}
                      >
                        {item.title}
                        <span
                          data-underline
                          class:list={[
                            "absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-blue-400 to-purple-500",
                            isActive ? "w-full" : "w-0",
                          ]}
                        />
                      </a>
                    </li>
                  );
                })}
              </div>
              {groupIndex < navigation.length - 1 && (
                <li class="h-6 w-px bg-gradient-to-b from-transparent via-white/20 to-transparent" />
              )}
            </>
          ))
        }
      </ul>

      <div class="flex items-center gap-4 border-l border-white/10 pl-8">
        <Social />
      </div>
    </div>
  </nav>
</header>

<div class="h-[73px]"></div>

<script>
  import { initHeaderAnimations } from "@scripts/animations/header";

  initHeaderAnimations();
</script>
