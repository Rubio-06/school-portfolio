---
import { heroConfig } from "@config/hero";
import { Button } from "@ui/Button";
---

<section
  data-hero-section
  class="relative flex min-h-[calc(100vh-73px)] items-center justify-center"
>
  <!-- Content -->
  <div class="relative z-10 container mx-auto px-8 py-20">
    <div class="mx-auto max-w-4xl text-center">
      <!-- Greeting -->
      <p data-hero-greeting class="mb-6 text-lg font-medium text-gray-400 md:text-xl">
        {heroConfig.greeting}
      </p>

      <!-- Name -->
      <h1
        data-hero-name
        class="mb-4 bg-gradient-to-r from-white via-blue-100 to-purple-200 bg-clip-text text-5xl font-bold text-transparent md:text-7xl lg:text-8xl"
      >
        {heroConfig.name}
      </h1>

      <!-- Tagline -->
      <p data-hero-tagline class="mb-8 text-xl font-medium text-gray-300 md:text-2xl">
        {heroConfig.tagline}
      </p>

      <!-- Animated text -->
      <div data-hero-animated class="mb-12 flex min-h-[80px] items-center justify-center">
        <span
          data-typewriter-text
          data-texts={JSON.stringify(heroConfig.animatedTexts)}
          class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-2xl font-bold text-transparent md:text-4xl"
        ></span>
        <span data-typewriter-cursor class="ml-0.5 font-bold text-blue-400">|</span>
      </div>

      <!-- CTA Buttons -->
      <div data-hero-cta class="flex flex-col items-center justify-center gap-4 sm:flex-row">
        <Button client:load variant="primary" href={heroConfig.cta.primary.href}>
          {heroConfig.cta.primary.text}
        </Button>

        <Button client:load variant="secondary" href={heroConfig.cta.secondary.href}>
          {heroConfig.cta.secondary.text}
        </Button>
      </div>

      <!-- Scroll indicator -->
      <div data-hero-decoration class="mt-20">
        <div
          class="mx-auto flex h-12 w-8 items-start justify-center rounded-full border-2 border-white/20 p-2"
        >
          <div class="animate-scroll h-2 w-1 rounded-full bg-white"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { initHeroAnimations } from "@animations/hero";

  initHeroAnimations();

  // Typewriter animation
  const textElement = document.querySelector("[data-typewriter-text]");
  const cursorElement = document.querySelector("[data-typewriter-cursor]");

  if (textElement && cursorElement) {
    const textsAttr = textElement.getAttribute("data-texts");
    const texts = textsAttr ? JSON.parse(textsAttr) : [];

    let currentIndex = 0;
    let isDeleting = false;

    // Cursor blink animation
    gsap.to(cursorElement, {
      opacity: 0,
      duration: 0.5,
      repeat: -1,
      yoyo: true,
      ease: "power1.inOut",
    });

    const typeWriter = () => {
      const currentText = texts[currentIndex];
      const displayedText = textElement.textContent || "";

      if (!isDeleting) {
        if (displayedText.length < currentText.length) {
          textElement.textContent = currentText.substring(0, displayedText.length + 1);
          gsap.delayedCall(0.08, typeWriter);
        } else {
          gsap.delayedCall(2, () => {
            isDeleting = true;
            typeWriter();
          });
        }
      } else {
        if (displayedText.length > 0) {
          textElement.textContent = currentText.substring(0, displayedText.length - 1);
          gsap.delayedCall(0.05, typeWriter);
        } else {
          isDeleting = false;
          currentIndex = (currentIndex + 1) % texts.length;
          gsap.delayedCall(0.5, typeWriter);
        }
      }
    };

    if (texts.length > 0) {
      typeWriter();
    }
  }
</script>

<style>
  @keyframes scroll {
    0% {
      transform: translateY(0);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateY(16px);
      opacity: 0;
    }
  }

  .animate-scroll {
    animation: scroll 2s ease-in-out infinite;
  }
</style>
